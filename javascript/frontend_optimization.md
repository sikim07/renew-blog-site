---
title: 'Frontend 최적화 / Frontend Optimization'
date: 2022-08-24 09:00:39
category: 'javascript'
draft: false
---

## 프론트엔드 최적화

프론트엔드 성능의 목표는 사용자가 웹사이트나 애플리케이션에서 원하는 것을 매우 제한된 시간에 얻을 수 있도록 하고 상호 작용하는 동안 
원활한 경험을 보장하는 것입니다.


### 1. 파일 압축
모든 웹사이트는 HTML, JS 및 CSS 코드 파일로 구성됩니다. 페이지가 복잡할수록 로딩 시간이 길어집니다. 사이트 응답성을 향상시키려면 
이러한 큰 코드 파일을 원래 크기로 압축해야 합니다. 다음은 파일 압축에 좋은 옵션입니다.

2015년 Google에서 도입한 `Brotli`는 현재 사용 가능한 최고의 범용 압축 방법에 필적하는 압축률을 가지고 있습니다. 
Brotli는 CertSimple 연구에 따르면 `Gzip`에 비해 JavaScript 문서를 14% 더 작게 압축하는 반면 CSS 및 HTML 압축 값은 
Gzip보다 21% 및 17배 높습니다.
`Gzip`은 또 다른 인기 있는 데이터 압축 및 압축 해제 프로그램입니다. 둘 중 무엇을 선택해야 할지 모르겠다면 Brotli 또는 
Gzip을 사용하여 압축 수준을 추정할 수 있습니다.

### 2. 반응형 이미지와 WebP 사용
이미지는 평균 웹 페이지 크기의 약 51%를 차지하므로 웹 사이트가 무겁고 느려질 수 있습니다. 스케일링 화면에서 이미지 전달 시간을 줄이고 
웹사이트의 성능을 높이려면 반응형 이미지를 사용하는 것이 좋습니다. `srcset`, `sizes` 및 `picture` 요소와 같은 반응형 이미지 
기술을 사용하면 액세스하는 장치의 크기와 해상도에 따라 다양한 크기의 이미지를 전달할 수 있습니다.

`WebP` 형식의 이미지는 JPEG보다 최대 30%, PNG 형식의 이미지보다 최대 25% 더 작습니다. JPEG와 비교할 때 `AVIF`는 WebP와 비교할 
때 50% 더 짧고 20% 더 작습니다. 간단히 말해서 이미지를 WebP 형식으로 변환하는 것만으로도 웹 페이지의 크기를 크게 줄일 수 있습니다. 
WebP 형식은 **Safari 및 iOS Safari에서 지원되지 않습니다**. `Squoosh` 및 `Online-Convert.com`과 같은 온라인 도구나 
`Command-line Tool`을 사용하여 JPG, PNG 및 기타 파일 형식을 WebP로 변환할 수 있습니다.

### 3. CDN 선택
`CDN`은 네트워크 대기 시간(네트워크를 통한 통신 지연)과 함께 나타나는 문제를 해결하기 위해 설계되었습니다. 이러한 지연은 특정 웹 페이지와 
사용자와 웹 사이트의 호스팅 서버 사이의 물리적 거리인 모든 페이지에 공통적인 다양한 이유 때문에 발생합니다. 이 거리를 줄이기 위해 CDN은 
다양한 지리적 위치에 콘텐츠 버전을 저장합니다.

간단히 말해서 CDN은 성능 중간 마일을 처리하여 사용자를 리소스에 더 가깝게 만듭니다. 서버가 이동하는 횟수가 크게 줄어들어 로딩 속도가 
빨라집니다.

사용자의 요청은 CDN을 통해 가장 가까운 서버로 전송됩니다. 사진 최적화에 정말 좋은 `image CDN`으로 알려진 CDN의 한 형태가 있습니다. 
이미지 파일 공간을 40~80% 절약할 수 있습니다. 이미지용 CDN을 포함하여 사진이 페이지 크기의 절반 이상을 차지하는 경우가 많다는 점을 
고려하면 페이지 로드 시간이 크게 향상될 수 있습니다.

### 4. Prefetching 활성화
`Prefetching`을 사용하면 브라우저에서 사용자가 가장 가까운 장래에 액세스할 수 있는 정보를 저장할 수 있습니다. `prefetching`은 **리소스의 시간 지연을 
줄이기 위해 자료 진행을 업로드합니다**. 시간이 되고 사용자가 브라우저의 캐시에 이미 저장된 일부 링크를 클릭하면 필요한 정보가 즉시 화면에 
나타납니다. 프리페칭에는 세 가지 주요 유형이 있습니다.

- `Link prefetching`을 통해 브라우저는 사용자가 가까운 장래에 요청할 가능성이 있는 리소스를 수집할 수 있습니다. 결과적으로 개발자는 소비자가 
특정 페이지를 방문할 가능성이 가장 높은 곳을 예측할 수 있습니다. 반면에 링크 프리페치는 그림 및 JavaScript와 같은 캐시 가능한 
요소로 제한됩니다.
- `DNS prefetching`: 사용자가 특정 페이지를 탐색하는 동안 IP 주소를 읽을 수 있는 웹사이트 URL로 변환합니다. 사용자가 DNS 프리페치 
세트가 있는 링크를 클릭하면 대기 시간이 크게 줄어듭니다.
- `Prerendering`은 `Prefetching`와 매우 유사합니다. 또한 사용자가 액세스할 수 있는 정보를 수집합니다. 이들 간의 주요 차이점은 사전 
렌더링이 전체 페이지를 렌더링하고 사용자가 페이지를 탐색하는 즉시 현재 탭이 숨겨진 사전 렌더링 페이지로 대체된다는 것입니다.

### 5. 사용하지 않는 CSS 및 JS 제거
**다운로드할 필요가 없는 CSS, HTML 및 JavaScript에서 불필요한 중복 데이터를 제거하는 관행**을 `resource minification`라고 합니다. 페이지를 
로드하거나 실행하는 동안 Chrome의 커버리지 테이블은 로드된 코드의 양과 실제로 사용된 코드의 양을 보여줍니다. 필요한 코드만 전송하면 
페이지 크기를 줄일 수 있습니다. 프로세스는 다음과 같습니다. 먼저 Google Chrome에서 페이지를 로드한 다음 적용 범위 도구를 
사용합니다(개발 도구에서 Ctrl+Shift+P를 누르고 "Coverage"를 입력하고 Drawer: Coverage를 누름). 페이지가 다시 로드되자마자 
얼마나 많은 사용되지 않은 코드가 있는지 확인할 수 있으므로 해당 모듈과 import()로 지연 로드를 찾을 수 있습니다. 그런 다음 다시 
한 번 커버리지 프로파일로 이동하여 초기 로드 시 더 적은 코드를 전달하는지 확인합니다.

축소는 서버에서 가져와야 하는 코드의 양을 줄여 프런트엔드 로드 속도를 가속화합니다. JavaScript, HTML, CSS, 스크립트를 많이 
사용하는 프로세스를 생성하려면 아래 기능을 사용하십시오.

- `JavaScript`: `Coverage tool in Chrome Dev Tools`, `JSMin`

- `CSS`:  `cssmin.js`, `Chrome Dev Tools’ Coverage tool`, `YUI Compressor`

- `HTML`:  `HTML Minifier`, `PageSpeed Insights`

### 6. 캐싱으로 속도 향상
캐싱은 사용자가 요청한 자산의 복사본을 저장하고 나중에 원본 복사본 대신 캐시된 복사본에 액세스합니다. 전송 속도를 향상시키는 데 도움이 
되는 다양한 유형의 캐싱이 있습니다.

- `Browser cache`: 파일은 브라우저 로컬 캐시에 저장되므로 액세스하려는 경우 서버에서 파일을 다운로드할 필요가 없습니다.
- `Cache server`: 캐시 서버는 사용자의 요청이 멀리 이동할 필요가 없도록 서로 다른 지리적 지역에 있습니다.
- `Memory cache`: 메모리 캐시는 데이터의 특정 부분을 SRAM에 저장하여 애플리케이션 내에서 데이터 전달 프로세스의 속도를 높이는 데 도움이 됩니다.
- `Disc cache`: 메모리 캐시와 마찬가지로 디스크 캐시는 기존 RAM을 사용하지만 응용 프로그램 내에서 더 빠르게 액세스할 수 있도록 데이터를 
저장합니다.

### 7. 이미지 최적화
JPEG 파일에는 위치, 날짜, 노출 및 셔터 속도와 같은 설정에 대한 추가 정보가 많이 포함되어 있습니다. 고해상도 이미지는 빠른 페이지 
로딩에 큰 위협이 되고 렌더링 프로세스가 상당히 느려집니다. 웹사이트가 이미지 킬러의 희생자가 되지 않으려면 JPEG를 `progressive` 및 
`compress(압축)`로 변환해야 합니다. 이미지 최적화에 가능한 옵션은 다음과 같습니다.

- `Optimus`: Optimus는 JPEG 이미지의 약간 손실 압축과 PNG 이미지의 무손실 압축을 목표로 합니다. 화질은 변하지 않지만 이미지에서 
추가 데이터를 제거하여 파일 크기를 줄입니다. Optimus(무료), Optimus HQ(연간 29$), Optimus HQ Pro(연간 149$)의 세 가지 
구독 옵션이 있습니다.
- `MozJPEG`: Mozilla JPEG 인코더 프로젝트를 적용하여 파일 크기 제한 없이 JPEG 및 PNG 이미지의 크기를 조정하고 압축할 수 있습니다. 
서비스는 100% 무료입니다.
- `Guetzli`: Guetzli는 Google에서 개발한 무료 라이선스 JPEG 인코더입니다. 압축기는 단색 및 날카로운 모서리와 같은 JPEG 형식의 단점을 
처리하는 데 특히 유용합니다.

적절한 형식과 크기를 선택하는 것 외에도 다양한 방법으로 이미지를 최적화하여 프론트엔드 페이지 로드 시간을 최소화할 수도 있습니다. 다양한 
추가 방법론을 적용할 수 있습니다.

1. HTTP/1.1 대신 HTTP/2 사용하기.
2. 이미지를 압축하기.
3. 이미지 세트를 사용하기.
4. 네트워크가 느린 사람들에게는 축소된 사진 전송하기.
5. 동적 JPEG 사용하기.

### 8. 동영상 최적화
이미지와 마찬가지로 동영상도 웹에 최적화되어야 합니다. 웹 사이트 성능에 부정적인 영향을 미치는 무거운 애니메이션 GIF와 느린 비디오를 
사용하는 대신 **애니메이션 WebP를 선택하거나 HTML5 비디오 태그로 교체**하는 것을 고려하십시오. 브라우저는 이미지처럼 비디오를 미리 로드할 
수 없지만 HTML5 형식은 더 가볍고 웹사이트의 비디오 플레이어를 더 잘 제어할 수 있습니다. 이 형식을 사용하면 원본 형식으로 비디오를 
업로드할 수 있으며 장치의 지리적 위치 기능 문제에 많은 가능성을 제공합니다. `HTML5 비디오 태그`는 몇 가지 파일 형식
(MP4, OGG 및 WebM)에서만 작동합니다. 일부 인기 있는 온라인 HTML5 비디오 인코더는 HTML5 비디오 변환기, 핸드브레이크, 변환기 
포인트 및 Freemake 비디오 변환기입니다.

2018년에는 완전히 무료이며 개발자들 사이에서 점점 더 인기를 얻고 있는 새로운 비디오 형식 AV1이 출시되었습니다.
사용자가 2분짜리 비디오를 보기 위해 몇 분 동안 기다리지 않도록 웹사이트가 동영상이 많은 경우 CDN을 잊지 마십시오.


출처: https://medium.com/@inverita/frontend-optimization-8-tips-to-improve-web-performance-29af4b00efe7